---
title: "Getting Started in R and RStudio"
output: 
  html_notebook:
    toc: true
editor_options: 
  chunk_output_type: inline
---

## Agenda

1.  Introductory stuff

2.  What are R and RStudio?; RStudio orientation

3.  Some things you can do in R(Studio)

    1.  Clean up, transform, and analyze data; generate statistical models
    2.  Visualize data
    3.  Intermix code, output (plots), and narrative/explanatory text with R Notebooks

4.  Where to go next; where to get answers

## Introductory stuff

### Learning goals

### Notes on presentation format

-   Feel free to follow along on your own computer, or simply watch

    -   This notebook (including code) will be shared!

-   Due to time constraints, this is more of a *guided tour* than a *lesson* in R

### About the presenter

-   Dominic Bordelon, Research Data Librarian, University Library System at Pitt

-   Previous experience:

    -   programmer in library settings 2014-2019

------------------------------------------------------------------------

## What is R? What is RStudio?

[**R**](https://www.r-project.org/) is:

-   an application for working with data

    -   "working with" = viewing, calculating, transforming, analyzing, visualizing
    -   a command-line executable
    -   in version 4.1.2 (12/2021)
    -   also available as a server

-   a programming language (for extending functionality and/or creating web applications)

-   multi-platform, free, open-source

-   known formally as "[The R Project for Statistical Computing](https://www.r-project.org/about.html)," by [the R Foundation](https://www.r-project.org/foundation/)

[**RStudio**](https://www.rstudio.com/) is:

-   an integrated development environment (IDE) with graphical interface for R and related tools

    -   in version 2021.09 (12/2021)

-   a public benefit corporation that develops software (>50% free and open source) and provides related services

You need R installed in order to use RStudio. They work together, but are separate applications.

------------------------------------------------------------------------

## RStudio orientation

### Panes

-   Bottom left: Console

    -   Run commands instantly in R $\rightarrow$ see command-line output
    -   Tab code completion; command history

-   Top left: Editor

    -   Where you open files (tabbed); syntax highlighting
    -   Write a script (multiple lines of R code), which you can *Run* ( = RStudio sends each line of the script to the console pane)
    -   Can also be used to write documents in plain text or markdown, or *notebooks* in RMarkdown

-   Top right: Environment, History

    -   Environment = workspace of your current R session

-   Bottom right: Help, Working Directory

    -   The `?` command

### RMarkdown

-   This document is written in RMarkdown!
-   Extends the popular markdown format (seen on Wikipedia and GitHub) by enabling the author to include executable code *chunks* as well as $\LaTeX$ expressions (e.g., $H = -\sum^{S}_{i=1} p_i \ln p_i$)
-   Switch between graphical and source editors

### Configuration

-   Tools > Global Options...

    -   Suggestion: General > Workspace > uncheck the .RData option and set the .RData dropdown to Never

-   Many options can also be configured at project level

### Files and file types

-   [**R Projects**](https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects) (.Rproj) are the suggested way of organizing your work in RStudio. Benefits include dedicated [command history](https://support.rstudio.com/hc/en-us/articles/200526217-Command-History-in-the-RStudio-IDE) and settings.
-   **R Notebooks** or RMarkdown documents (.Rmd) intermix R code and text formatted with markdown
-   **R scripts** (.R) are plain-text files that can be executed by R directly. However, because the file must be parseable, this means that the only permitted "natural language" is in code comments.

------------------------------------------------------------------------

## Some things you can do with R

### Prerequisite basics: objects, functions, data structures

R uses **objects** to store and work with values. Numeric objects as well as raw values can interact via mathematical operators.

*Directly below is our first **code chunk***. *You can insert one anywhere in an R Notebook. Whatever you type inside has to be valid R code, although comment. You can execute an individual line or the whole chunk.*

```{r}
length <- 12
width <- 8

# operators:
length + 2
(2^2) / width
1+2

# calculating area:
length * width
```

If we wanted to save this value, we would create a third object called `area`:

```{r}
area <- length * width
area
```

Beyond mathematical operators, **functions** provide the basic ways of working with objects. Each function has a *signature* dictating which *arguments* (parameters) it accepts. For example, the `sqrt()` function, which calculates the square root of an integer, accepts (and requires) one argument, `x`:

```{r}
# next line will produce an error; remove # to try it:
#sqrt()

sqrt(x=16)
# may also be written as:
sqrt(16)

sqrt((2+1)^2)
area <- 99
sqrt(area)
```

You can store more than one value in a object by using a data structure such as a vector, a matrix, or a data frame. Itemwise operations/functions can work on vectors.

A **vector** is a simple ordered collection, all items being of the same type (e.g., `num`). The **`c()`** ("combine") function creates a vector.

```{r}
my_vector <- c(13, 11.2, 6^2, 4.31e2, 0, -7)
my_vector

length(my_vector) # how many items in the vector?
typeof(my_vector) # what type are they?

# doing math on each item in the vector:
my_vector + 100
my_vector^2

# some functions operate on the data structure in aggregate, not just itemwise:
min(my_vector)
mean(my_vector)
median(my_vector)
sd(my_vector)
max(my_vector)
```

A **data frame** is like a table or spreadsheet. Each column of information is a vector. Rows are called **observations** and columns are called **variables**. The example below uses a built-in dataset called `mtcars`. The **`head()`**, **`str()`** ("structure"), and **`View()`** functions give us a few ways to examine data frames. (`str()` is valuable for any type of object!)

```{r}
head(mtcars)
str(mtcars)
View(mtcars)

# to reference a named column, use a $:
mtcars$mpg
```

```{r eval=FALSE, include=FALSE}
# code that i used to install the tweetrmd package and fetch the tweet that appears below:
#install.packages("devtools")
#devtools::install_github("gadenbuie/tweetrmd")
library(tweetrmd)
tweet_screenshot(
  tweet_url = "https://twitter.com/SScottGraham_/status/1475931340247810054",
  file = "eyeball.png"
)
```

[![Eyeball your data. ðŸ‘ï¸](eyeball.png "tweet by @SScottGraham_"){width="400"}](https://twitter.com/SScottGraham_/status/1475931340247810054)

R's core functionality ("**Base R**") can be extended with many community-authored **packages**. Once a package is installed, you can use its code in your current environment with the `library()` function. (Most packages are useful, but the example below is just for fun.)

```{r}
install.packages("cowsay")
library(cowsay)

```

------------------------------------------------------------------------

### Clean up and transform data

The R community has developed a set of packages called [**the tidyverse**](https://www.tidyverse.org/) to improve base R's experience for working with data. Using the tidyverse, below, we'll open a CSV file (spreadsheet) and perform a few transformations.

A new syntax convention in the code below is the **pipe**, written as `%>%`. For `functionA() %>% functionB()`, you could read it as, "do functionA then use its output to do functionB."

```{r}
library(tidyverse)

#read_csv
#tibble
#pipe
#pivot?
#missing values
#filter
#mutate
#save_csv

#group by, summarize
#relational
```

### Generate statistical models

### Visualize data

### Intermix code, output, and narrative text with R Notebooks

-   The approach of mixing computer code with natural-language narrative is called "literate programming" ([Knuth 1992](https://pitt.primo.exlibrisgroup.com/permalink/01PITT_INST/e8h8hp/alma9911528493406236))

-   Convenience: tweak data, code, and visualizations and see immediate feedback; display/edit all three inline in one application

-   Reproducibility: if you share the data files and the notebook you use for analysis, a peer can easily rerun it

-   Incorporates separate conversion tool [pandoc](https://pandoc.org/) to generate a wealth of [output formats](https://bookdown.org/yihui/rmarkdown/output-formats.html "R Markdown: The Definitive Guide") (HTML notebook, Word doc, Powerpoint, HTML presentation, PDF, latex...)

-   Example papers/projects:

    -   Chaudhry, Suparna, Marc Dotson, and Andrew Heiss. 2021. "Who Cares about Crackdowns? Exploring the Role of Trust in Individual Philanthropy." *Global Policy* 12 (S5): 45--58. <https://doi.org/10.1111/1758-5899.12984>. Analysis notebook: <https://stats.andrewheiss.com/who-cares-about-crackdowns/>

    -   Kadauke, Stephan, Regina M. Myers, Yimei Li, Richard Aplenc, Diane Baniewicz, David M. Barrett, Allison Barz Leahy, et al. 2021. "Risk-Adapted Preemptive Tocilizumab to Prevent Severe Cytokine Release Syndrome After CTL019 for Pediatric B-Cell Acute Lymphoblastic Leukemia: A Prospective Clinical Trial." *Journal of Clinical Oncology* 39 (8): 920--30. <https://doi.org/10.1200/JCO.20.02477>. Reproducibility supplement: <https://skadauke.github.io/early-toci/>

    -   NMFSReports package: [<https://github.com/EmilyMarkowitz-NOAA/NMFSReports/blob/main/presentations/2021-06-05NMFSReports-RCascadiaConf.pdf>](https://github.com/EmilyMarkowitz-NOAA/NMFSReports/blob/main/presentations/2021-06-05NMFSReports-RCascadiaConf.pdf) (templating for NOAA reports/tech memos, developed by a NOAA fisheries biologist)

    -   Faylab Lab Manual: <https://thefaylab.github.io/lab-manual/> (manual for an ecology lab written in [bookdown](https://bookdown.org/), Rmd for books)

### Program in R

-   Extracting code as functions follows "the DRY Principle" (Don't Repeat Yourself); easier maintenance
-   Iteration (performing the same action many times)
-   Packages for reusability by yourself and others

```{r}

```

------------------------------------------------------------------------

## Where to go next

Here are some ways you can continue learning:

-   [R for Data Science](https://r4ds.had.co.nz/), a free online book by community leader Hadley Wickham
-   [LinkedIn Learning](https://www.technology.pitt.edu/services/ondemand-training-linkedin-learning), offered via Pitt IT, has video courses
-   [PittCat ebooks](https://pitt.primo.exlibrisgroup.com/discovery/search?query=any,contains,r%20statistics&tab=Everything&search_scope=MyInst_and_CI&vid=01PITT_INST:01PITT_INST&lang=en&offset=0), access to thousands of online tech books
-   [exercism R track](https://exercism.org/tracks/r), a platform for learning to code
-   Pitt students: STAT 1621 Principles of Data Science
-   We offer training for groups (labs, collaborations, etc.)

### Where to get answers; reference resources

Here are resources for solving specific questions/problems you have in R:

-   Weekly Open Office Hour: Mondays 5--6pm (see flier below)
-   Pitt ULS [AskUs](https://library.pitt.edu/ask-us): email responses for simple questions and/or book an appointment for in-person or Zoom help
-   [StackOverflow (questions tagged R)](https://stackoverflow.com/questions/tagged/r) is a great place for tech questions (search before asking)

Reference resources and ways to connect with the R user community:

-   The [Big Book of R](https://www.bigbookofr.com/) collects many free resources in one place and organizes them by topic.
-   [/r/rstats community on reddit](https://www.reddit.com/r/rstats/)
-   [RStudio Community](https://community.rstudio.com/) (forums)
-   [#rstats](https://twitter.com/hashtag/rstats) on Twitter

[![R and RStudio Open Office Hour, Spring 2022](images/r-open-office-hour_202201.png "R and RStudio Open Office Hour, Spring 2022")](https://bit.ly/pitt-r-22)
